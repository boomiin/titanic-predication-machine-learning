# -*- coding: utf-8 -*-
"""TITANIC_PREDICTION.ipynb

Automatically generated by Colaboratory.

Original file is located at
    https://colab.research.google.com/drive/1InZBvJu2ke3sbi2O7nKdFaMNXx4HH06t
"""

from joblib import load
import pandas as pd

reg_loaded, _score = load('regression_model_saved.joblib')

print(_score)

#age
#prix du billet
#class: 1ou 2 ou 3
#sex female,male
#ville_embarquemnt S,Q,C


while(True):
    ville=(input("Ville d'embarquement (S/Q/C):")[0]).upper()
    if(ville in ["S","Q","C"]):
        break
    print("entrez S pour Southampton, C pour Cherbourg  et Q pour Queenstown ")    
    

while(True):
    try:
        age=float(input("Age de l'individu entre 0 et 100: "))
        if(age<0 or age>100):
            print("Entrez un age compris entre 0 et 100")
        break
    except:
        print("Mauvaise valeur")

while(True):
    sex=(input("Sexe de l'individu (F/H) :")[0]).upper()
    if(sex=="F" or sex=="H"):
        break
    print("entrez F pour femme et H pour homme")  
    
while(True):
    classe=input("Classe 1, 2 ou 3:")
    if(classe in ["1","2","3"]):
        break

while(True):
    try:
        prix_du_billet=float(input("Prix du billet de l'individu : "))
    except:
        print("Mauvaise valeur") 
    break

from sklearn.preprocessing import StandardScaler, OneHotEncoder
X=pd.DataFrame()
X["Age"]=[age]
X["Fare"]=[prix_du_billet]
X["Pclass_1"]=[1 if classe==1 else 0]
X["Pclass_2"]=[1 if classe==2 else 0]
X["Pclass_3"]=[1 if classe==3 else 0]
X["Sex_female"]=[1 if sex=="F" else 0]
X["Sex_male"]=[1 if sex=="H" else 0]
X["Embarked_C"]=[1 if ville=="C" else 0]
X["Embarked_Q"]=[1 if ville=="Q" else 0]
X["Embarked_S"]=[1 if ville=="S" else 0]

#numeric=StandardScaler().fit_transform(X[["age","prix"]])
#categoriq=OneHotEncoder().fit_transform(X[["classe","sex","ville"]]).toarray()
#T=pd.concat([pd.DataFrame(numeric),pd.DataFrame(categoriq)],axis=1)
X

v=reg_loaded.predict(X)[0]
v

print("POURCENTAGE D'ERREUR : ",_score*100)
if(v=="0"):
    print("NOT SURVIVED")
else:
    print("SURVIVED")
